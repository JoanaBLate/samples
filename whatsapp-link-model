<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>WhatsApp Link Model</title>
    <meta name="description" content="Making the WhatsApp link work for Linux desktop. Animation included.">
    <link rel="icon" href="data:,">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * {
            margin: 0;
            padding: 0;
            border: 0;
            box-sizing: border-box;
        }
        body {
            text-aling: center;
        } 
        .text {
            width: 400px;
            max-width: 90%;
            margin: 50px auto;
            background: lightsilver;            
            font-family:sans-serif;
            text-align: justify;
            text-justify: inter-word;
            word-break: break-word;
        }
        .whatsapp-icon {
            height: 100px;
            width: 100px;
            margin: 10px auto;
            animation: wia 3s infinite;
        }        
        /*****************************/
        /*  whatsapp icon animation  */
        /*****************************/
        @keyframes wia {
            35% { transform: scale(1); }
            45% { transform: scale(1.5); }
            55% { transform: scale(1); }
            65% { transform: scale(1.3); }
            75% { transform: scale(1); }
        }         
    </style>
</head>
<body>

    <div class="text">
        This page is just a model of how make WhatsApp links <b>work for Linux Desktop</b>. Also it serves as example of animating an embedded SVG WhatsApp icon.
        <br><br>
        You must edit the code and replace <b>XXXXXXXXXXXXX</b> by a complete real phone number.
        <br><br>
        You can get more information <a target="_blank" href="https://www.bobsprite.com/blog/whatsapp-link">here</a>.
    </div>

    <a class="whatsapp-link" target="_blank" href="phone=XXXXXXXXXXXXX&text=Hello">
        <div class="whatsapp-icon"></div>
    </a>

    <br><br><br><br><br><br><br><br>


    <script>
    
"use strict"

// main ///////////////////////////////////////////////////////////////////////

var whatsAppSvgIcon = '<svg height="100%" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;" version="1.1" viewBox="0 0 24 24" width="100%" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:serif="http://www.serif.com/" xmlns:xlink="http://www.w3.org/1999/xlink"><rect height="24" id="Artboard1" style="fill:none;" width="24" x="0" y="0"/><g><g><path d="M4.018,17.048c-0.96,-1.484 -1.518,-3.253 -1.518,-5.151c0,-5.243 4.257,-9.5 9.5,-9.5c5.243,0 9.5,4.257 9.5,9.5c0,5.243 -4.257,9.5 -9.5,9.5c-1.777,0 -3.44,-0.489 -4.863,-1.339l-4.637,1.545l1.518,-4.555Z" style="fill:#f3f3f3;"/><path d="M5.795,16.304c-0.886,-1.244 -1.407,-2.765 -1.407,-4.407c0,-4.201 3.411,-7.612 7.612,-7.612c4.201,0 7.612,3.411 7.612,7.612c0,4.201 -3.411,7.611 -7.612,7.611c-1.59,0 -3.066,-0.488 -4.288,-1.323l-2.862,0.954l0.945,-2.835Z" style="fill:#00a82d;"/></g><path d="M9.714,13.873c-1.124,-1.374 -1.874,-3.056 -2.109,-4.88c-0.063,-0.508 0.106,-1.018 0.461,-1.387c0.355,-0.369 0.858,-0.558 1.368,-0.515l0.049,0.005c0,0 0.561,0.15 0.868,0.233c0.122,0.033 0.219,0.124 0.26,0.243c0.138,0.41 0.464,1.373 0.618,1.826c0.05,0.147 0.004,0.31 -0.114,0.41c-0.233,0.196 -0.618,0.52 -0.858,0.723c-0.129,0.109 -0.17,0.29 -0.1,0.443c0.279,0.608 0.635,1.176 1.057,1.69c0.434,0.502 0.933,0.949 1.485,1.327c0.14,0.095 0.325,0.085 0.454,-0.024c0.241,-0.202 0.626,-0.526 0.858,-0.722c0.119,-0.1 0.287,-0.117 0.424,-0.043c0.42,0.228 1.314,0.712 1.694,0.918c0.111,0.06 0.185,0.172 0.196,0.297c0.029,0.317 0.083,0.895 0.083,0.895l-0.004,0.049c-0.044,0.51 -0.315,0.974 -0.739,1.261c-0.424,0.288 -0.955,0.368 -1.445,0.22c-1.772,-0.545 -3.313,-1.581 -4.479,-2.937l-0.027,-0.032Z" style="fill:#f3f3f3;"/></g></svg>'

function main() {
    processWhatsAppIcons()
    processWhatsAppLinks() 
}

// whatsapp ///////////////////////////////////////////////////////////////////

function processWhatsAppIcons() {
    var elements = document.getElementsByClassName("whatsapp-icon")
    for (var e of elements) { e.innerHTML = whatsAppSvgIcon }
}

function processWhatsAppLinks() {
    var href = "https://"
    href += isMobileDevice() ? "api" : "web"
    href += ".whatsapp.com/send?" 
    
    var anchors = document.getElementsByClassName("whatsapp-link")
    for (var a of anchors) { a.href = href + a.href }
}

// device /////////////////////////////////////////////////////////////////////

function isMobileDevice() {
    if (typeof window.orientation != "undefined") { return true }
    if (navigator.userAgent.indexOf("IEMobile") != -1) { return true }
    return false
}

///////////////////////////////////////////////////////////////////////////////

main()  
    </script>
</body>
</html>
